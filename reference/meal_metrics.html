<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Meal Metrics — meal_metrics • iglu</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Meal Metrics — meal_metrics"><meta name="description" content="The function meal_metrics calculates three simple glucose meal metrics"><meta property="og:description" content="The function meal_metrics calculates three simple glucose meal metrics"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">iglu</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/iglu.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/AGP_and_Episodes.html">AGP and Episodes</a></li>
    <li><a class="dropdown-item" href="../articles/lasagna_plots.html">Lasagna Plots in iglu</a></li>
    <li><a class="dropdown-item" href="../articles/MAGE.html">MAGE Algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/metrics_list.html">List of metrics implemented in iglu</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/irinagain/iglu/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate Meal Metrics</h1>
      <small class="dont-index">Source: <a href="https://github.com/irinagain/iglu/blob/master/R/meal_metrics.R" class="external-link"><code>R/meal_metrics.R</code></a></small>
      <div class="d-none name"><code>meal_metrics.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function meal_metrics calculates three simple glucose meal metrics</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">meal_metrics</span><span class="op">(</span><span class="va">data</span>, <span class="va">mealtimes</span>, before_win <span class="op">=</span> <span class="fl">1</span>, after_win <span class="op">=</span> <span class="fl">3</span>,</span>
<span>recovery_win <span class="op">=</span> <span class="fl">1</span>, interpolate <span class="op">=</span> <span class="cn">TRUE</span>, adjust_mealtimes <span class="op">=</span> <span class="cn">TRUE</span>, dt0 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>inter_gap <span class="op">=</span> <span class="fl">45</span>, tz <span class="op">=</span> <span class="st">""</span>, glucose_times <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>DataFrame object with column names "id", "time", and "gl". Should only be data for 1 subject. In case multiple subject ids are detected, a warning is produced and only 1st subject is used.</p></dd>


<dt id="arg-mealtimes">mealtimes<a class="anchor" aria-label="anchor" href="#arg-mealtimes"></a></dt>
<dd><p>Either a vector of mealtimes, corresponding
to data being from a single subject, OR a dataframe with at least 2 columns labeled
id and mealtime. Optionally the mealtimes dataframe can include a column labeled meal,
giving the meal type (helps to compensate for overlapping meals)</p></dd>


<dt id="arg-before-win">before_win<a class="anchor" aria-label="anchor" href="#arg-before-win"></a></dt>
<dd><p>integer specifying number of hours to extend window before meal</p></dd>


<dt id="arg-after-win">after_win<a class="anchor" aria-label="anchor" href="#arg-after-win"></a></dt>
<dd><p>integer specifying number of hours to extend window after meal</p></dd>


<dt id="arg-recovery-win">recovery_win<a class="anchor" aria-label="anchor" href="#arg-recovery-win"></a></dt>
<dd><p>interger specifying number of hours for recovery beyond after window</p></dd>


<dt id="arg-interpolate">interpolate<a class="anchor" aria-label="anchor" href="#arg-interpolate"></a></dt>
<dd><p>Boolean to indicate if CGM data should be interpolated or not.
Default set to FALSE due to time intensive nature of interpolation. Parameters dt0,
inter_gap, and tz will only be used if interpolate is set to TRUE.</p></dd>


<dt id="arg-adjust-mealtimes">adjust_mealtimes<a class="anchor" aria-label="anchor" href="#arg-adjust-mealtimes"></a></dt>
<dd><p>Boolean to indicate if function should attempt to align
mealtimes with CGM data times. This is important if mealtimes and CGM data times
are not exactly aligned, because the function will return NA's for mealtimes
that don't match with a corresponding CGM time stamp.</p></dd>


<dt id="arg-dt-">dt0<a class="anchor" aria-label="anchor" href="#arg-dt-"></a></dt>
<dd><p>The time frequency for interpolation in minutes, the default will match the CGM meter's frequency (e.g. 5 min for Dexcom).</p></dd>


<dt id="arg-inter-gap">inter_gap<a class="anchor" aria-label="anchor" href="#arg-inter-gap"></a></dt>
<dd><p>The maximum allowable gap (in minutes) for interpolation. The values will not be interpolated between the glucose measurements that are more than inter_gap minutes apart. The default value is 45 min.</p></dd>


<dt id="arg-tz">tz<a class="anchor" aria-label="anchor" href="#arg-tz"></a></dt>
<dd><p>A character string specifying the time zone to be used. System-specific (see <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>), but " " is the current time zone, and "GMT" is UTC (Universal Time, Coordinated). Invalid values are most commonly treated as UTC, on some platforms with a warning.</p></dd>


<dt id="arg-glucose-times">glucose_times<a class="anchor" aria-label="anchor" href="#arg-glucose-times"></a></dt>
<dd><p>Boolean to indicate if underlying glucose and times should be returned
- e.g. baseline glucose value used to calculate \(Delta G\). Intended for use in plotting function</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>By default tibble object with 6 columns will be returned: id, time, meal, deltag,
deltat, and basereco. If glucose_times = TRUE then 5 more columns are returned
for baseline glucose (basegl), peak glucose (peakgl), recover glucose (recovergl),
peak timestamp (peaktime), and recovery timestamp (recovertime)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A tibble object is returned with three metrics calculated for each mealtime.
The last three columns of the output correspond to the three metrics: deltag
refers to \(\Delta G\), deltat is \(\Delta T\), and basereco is % Baseline recovery.
If no meal column is given in the original data, one will be automatically generated
with a unique number for each meal.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Service, F. John. (2013) Glucose Variability, <em>Diabetes</em>
<strong>62(5)</strong>: 1398-1404, <a href="https://doi.org/10.2337/db12-1396" class="external-link">doi:10.2337/db12-1396</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>plot_meals()</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_data_hall</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_meals_hall</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">meal_metrics</span><span class="op">(</span><span class="va">example_data_hall</span>, <span class="va">example_meals_hall</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-69-001</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-69-026</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-69-032</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-69-090</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-69-091</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-69-114</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-70-1005</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 1636-70-1010</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-015</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-017</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-019</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-021</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-024</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-027</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-035</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No mealtimes found for subject: 2133-036</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There was 1 warning in `dplyr::reframe()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `meal_metrics_single(...)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In group 9: `id = "2133-004"`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning in `meal_metrics_single()`:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Some meals don't match with CGM readings. Mealtimes returned with NA for metric values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 25 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id           time                meal  deltag deltat basereco</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 1636-69-001  <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 1636-69-026  <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 1636-69-032  <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 1636-69-090  <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 1636-69-091  <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 1636-69-114  <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 1636-70-1005 <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 1636-70-1010 <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2133-004     2016-09-23 <span style="color: #949494;">10:10:00</span> CF 1    87.8     80    0.362</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2133-004     2016-09-27 <span style="color: #949494;">09:40:00</span> PB 1    <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 15 more rows</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elizabeth Chun, Steve Broll, David Buchanan, John Muschelli, Nathaniel Fernandes, Irina Gaynanova.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

