<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculates Hypo/Hyperglycemic episodes with summary statistics — episode_calculation • iglu</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculates Hypo/Hyperglycemic episodes with summary statistics — episode_calculation"><meta name="description" content="The function determines episodes or events, calculates summary statistics,
and optionally returns data with episode label columns added"><meta property="og:description" content="The function determines episodes or events, calculates summary statistics,
and optionally returns data with episode label columns added"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">iglu</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/iglu.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/AGP_and_Episodes.html">AGP and Episodes</a></li>
    <li><a class="dropdown-item" href="../articles/lasagna_plots.html">Lasagna Plots in iglu</a></li>
    <li><a class="dropdown-item" href="../articles/MAGE.html">MAGE Algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/metrics_list.html">List of metrics implemented in iglu</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/irinagain/iglu/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculates Hypo/Hyperglycemic episodes with summary statistics</h1>
      <small class="dont-index">Source: <a href="https://github.com/irinagain/iglu/blob/master/R/episode_calculation.R" class="external-link"><code>R/episode_calculation.R</code></a></small>
      <div class="d-none name"><code>episode_calculation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function determines episodes or events, calculates summary statistics,
and optionally returns data with episode label columns added</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">episode_calculation</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  lv1_hypo <span class="op">=</span> <span class="fl">70</span>,</span>
<span>  lv2_hypo <span class="op">=</span> <span class="fl">54</span>,</span>
<span>  lv1_hyper <span class="op">=</span> <span class="fl">180</span>,</span>
<span>  lv2_hyper <span class="op">=</span> <span class="fl">250</span>,</span>
<span>  dur_length <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  end_length <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  return_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dt0 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inter_gap <span class="op">=</span> <span class="fl">45</span>,</span>
<span>  tz <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>DataFrame object with column names "id", "time", and "gl". Should only be data for 1 subject. In case multiple subject ids are detected, a warning is produced and only 1st subject is used.</p></dd>


<dt id="arg-lv-hypo">lv1_hypo<a class="anchor" aria-label="anchor" href="#arg-lv-hypo"></a></dt>
<dd><p>Numeric value specifying a hypoglycemia threshold for level 1</p></dd>


<dt id="arg-lv-hypo">lv2_hypo<a class="anchor" aria-label="anchor" href="#arg-lv-hypo"></a></dt>
<dd><p>Numeric value specifying a hypoglycemia threshold for level 2</p></dd>


<dt id="arg-lv-hyper">lv1_hyper<a class="anchor" aria-label="anchor" href="#arg-lv-hyper"></a></dt>
<dd><p>Numeric value specifying a hyperglycemia threshold for level 1</p></dd>


<dt id="arg-lv-hyper">lv2_hyper<a class="anchor" aria-label="anchor" href="#arg-lv-hyper"></a></dt>
<dd><p>Numeric value specifying a hyperglycemia threshold for level 2</p></dd>


<dt id="arg-dur-length">dur_length<a class="anchor" aria-label="anchor" href="#arg-dur-length"></a></dt>
<dd><p>Numeric value specifying the minimum duration in minutes to be
considered an episode. Note dur_length should be a multiple of the data recording
interval otherwise the function will round up to the nearest multiple. Default
is 15 minutes to match consensus.</p></dd>


<dt id="arg-end-length">end_length<a class="anchor" aria-label="anchor" href="#arg-end-length"></a></dt>
<dd><p>Numeric value specifying the minimum duration in minutes of
improved glycemia for an episode to end. Default is equal to dur_length to match consensus.</p></dd>


<dt id="arg-return-data">return_data<a class="anchor" aria-label="anchor" href="#arg-return-data"></a></dt>
<dd><p>Boolean indicating whether to also return data with episode labels.
Defaults to FALSE which means only episode summary statistics will be returned</p></dd>


<dt id="arg-dt-">dt0<a class="anchor" aria-label="anchor" href="#arg-dt-"></a></dt>
<dd><p>The time frequency for interpolation in minutes, the default will match the CGM meter's frequency (e.g. 5 min for Dexcom).</p></dd>


<dt id="arg-inter-gap">inter_gap<a class="anchor" aria-label="anchor" href="#arg-inter-gap"></a></dt>
<dd><p>The maximum allowable gap (in minutes) for interpolation. The values will not be interpolated between the glucose measurements that are more than inter_gap minutes apart. The default value is 45 min.</p></dd>


<dt id="arg-tz">tz<a class="anchor" aria-label="anchor" href="#arg-tz"></a></dt>
<dd><p>A character string specifying the time zone to be used. System-specific (see <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>), but " " is the current time zone, and "GMT" is UTC (Universal Time, Coordinated). Invalid values are most commonly treated as UTC, on some platforms with a warning.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If return_data is FALSE, a single dataframe with columns:</p>
<dl><dt>id</dt>
<dd><p>Subject id</p></dd>

<dt>type</dt>
<dd><p>Type of episode - either hypoglycemia or hyperglycemia</p></dd>

<dt>level</dt>
<dd><p>Level of episode - one of lv1, lv2, extended, lv1_excl</p></dd>

<dt>avg_ep_per_day</dt>
<dd><p>Average number of episodes per day calculated as
(total # episodes)/(recording time in days (24hrs))</p></dd>

<dt>avg_ep_duration</dt>
<dd><p>Average duration of episodes in minutes</p></dd>

<dt>avg_ep_gl</dt>
<dd><p>Average glucose in the episode in mg/dL</p></dd>

<dt>total_episodes</dt>
<dd><p>Total number of episodes in the subject's glucose trace</p></dd>


</dl><p>If return_data is TRUE, returns a list where the first entry is the episode summary dataframe
(see above) and the second entry is the input data with episode labels added. Note
the data returned here has been interpolated using the CGMS2DayByDay() function.
Mostly for use with epicalc_profile function. Format of the second list entry is:</p>
<dl><dt>id</dt>
<dd><p>Subject id</p></dd>

<dt>time</dt>
<dd><p>Interpolated timestamps</p></dd>

<dt>gl</dt>
<dd><p>glucose in mg/dL</p></dd>

<dt>[episode_label]</dt>
<dd><p>One column per episode label - i.e. lv1_hypo, lv2_hypo, lv1_hyper, lv2_hyper, ext_hypo.
0 means not this type of episode, a positive integer label is assigned to each episode.
Note the labels are *not* unique by subject only unique by segment</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>We follow the definition of episodes given in the 2023 consensus by Battelino et al.
Note we have classified lv2 as a subset of lv1 since we find the consensus to be
slightly ambiguous. For lv1 exclusive of lv2, please see lv1_excl which summarises
episodes that were exclusively lv1 and did not cross the lv2 threshold. Also note,
hypo extended refers to episodes that are &gt;120 consecutive minutes below lv1 hypo
and ends with at least 15 minutes of normoglycemia. For more details on each category
please see the reference below (Battelino et al 2023).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Battelino et al. (2023): Continuous glucose monitoring and metrics for clinical
trials: an international consensus statement
<em>Lancet Diabetes &amp; Endocrinology</em> <strong>11(1)</strong> .42-57,
<a href="https://doi.org/10.1016/s2213-8587%2822%2900319-9" class="external-link">doi:10.1016/s2213-8587(22)00319-9</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>epicalc_profile()</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Elizabeth Chun, Jung Hoon Seo, Johnathan Shih</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">episode_calculation</span><span class="op">(</span><span class="va">example_data_5_subject</span>, lv1_hypo<span class="op">=</span><span class="fl">100</span>, lv1_hyper<span class="op">=</span> <span class="fl">120</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 35 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id        type  level avg_ep_per_day avg_ep_duration avg_ep_gl total_episodes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Subject 1 hypo  lv1            2.88             130.      92.9             32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Subject 1 hypo  lv2            0                  0       <span style="color: #BB0000;">NA</span>                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Subject 1 hypo  exte…          1.08             243.      92.1             12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Subject 1 hyper lv1            3.42             170.     143.              38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Subject 1 hyper lv2            0.180             30      264.               2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Subject 1 hypo  lv1_…          2.88             130.      92.9             32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Subject 1 hyper lv1_…          3.33             166.     141.              37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Subject 2 hypo  lv1            0.102             50       94.6              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Subject 2 hypo  lv2            0                  0       <span style="color: #BB0000;">NA</span>                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Subject 2 hypo  exte…          0                  0       <span style="color: #BB0000;">NA</span>                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 25 more rows</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elizabeth Chun, Steve Broll, David Buchanan, John Muschelli, Nathaniel Fernandes, Irina Gaynanova.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

