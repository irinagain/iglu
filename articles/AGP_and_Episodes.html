<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="iglu">
<title>AGP and Episodes • iglu</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="AGP and Episodes">
<meta property="og:description" content="iglu">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">iglu</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.4.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/iglu.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/AGP_and_Episodes.html">AGP and Episodes</a>
    <a class="dropdown-item" href="../articles/MAGE.html">MAGE Algorithm</a>
    <a class="dropdown-item" href="../articles/lasagna_plots.html">Lasagna Plots in iglu</a>
    <a class="dropdown-item" href="../articles/metrics_list.html">List of metrics implemented in iglu</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>AGP and Episodes</h1>
            
      
      
      <div class="d-none name"><code>AGP_and_Episodes.Rmd</code></div>
    </div>

    
    
<p>The iglu package includes two single page reports - an ambulatory
glucose profile (AGP), and an episode calculation report.</p>
<div class="section level2">
<h2 id="ambulatory-glucose-profile-agp">Ambulatory Glucose Profile (AGP)<a class="anchor" aria-label="anchor" href="#ambulatory-glucose-profile-agp"></a>
</h2>
<p>The iglu package allows one to generate an Ambulatory Glucose Profile
(AGP) report - see <a href="https://doi.org/10.1089/dia.2019.0034" class="external-link">Johnson (2019) “Utilizing
the ambulatory glucose profile to standardize and implement continuous
glucose monitoring in clinical practice.”</a>. Below is an example
report for Subject 1, which includes information on data collection
period, time spent in standardized glycemic ranges (cutoffs of 54, 70,
180 and 250 mg/dL) displayed as a stacked bar chart, glucose variability
as measured by %CV, and visualization of quantiles of the glucose
profile across days together with daily glucose views.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/agp.html">agp</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in</span></span>
<span><span class="co">#&gt; dplyr 1.1.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `reframe()` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> When switching from `summarise()` to `reframe()`, remember that `reframe()`</span></span>
<span><span class="co">#&gt;   always returns an ungrouped data frame and adjust accordingly.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">iglu</span> package.</span></span>
<span><span class="co">#&gt;   Please report the issue to the authors.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span></code></pre></div>
<p><img src="AGP_and_Episodes_files/figure-html/unnamed-chunk-1-1.png" width="600px" height="500px"></p>
<div class="section level3">
<h3 id="episode-calculation">Episode Calculation<a class="anchor" aria-label="anchor" href="#episode-calculation"></a>
</h3>
<p>The Episode_Calculation function measures the number of episodes that
hypoglycemia and hyperglycemia that occur more than a certain
period.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/episode_calculation.html">episode_calculation</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>,lv2_hypo <span class="op">=</span> <span class="fl">70</span>, lv1_hypo <span class="op">=</span> <span class="fl">120</span>, lv2_hyper <span class="op">=</span> <span class="fl">180</span>, dur_length <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span><span class="co">#&gt;                id Hypo_ep Hyper_ep hypo_duration hyper_duration low_alert</span></span>
<span><span class="co">#&gt; 1 Subject 1 (Lv1)    3.14     2.64        245.62         197.23     55.29</span></span>
<span><span class="co">#&gt; 2 Subject 1 (Lv2)    0.07     1.14         25.00          85.79      0.16</span></span>
<span><span class="co">#&gt;   high_alert target_range hypo_min_avg hyper_min_avg</span></span>
<span><span class="co">#&gt; 1      43.98         0.72         0.55          0.44</span></span>
<span><span class="co">#&gt; 2       7.90        91.95         0.00          0.08</span></span></code></pre></div>
<p>In this example, example_data_1_subject contains multiple days, and
episode_calculation function calculate the number of episodes across
days.</p>
<div class="section level4">
<h4 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h4>
<div class="section level5">
<h5 id="data">data<a class="anchor" aria-label="anchor" href="#data"></a>
</h5>
<p>DataFrame object with column names “id”, “time”, and “gl”. Should
only be data for 1 subject. In case multiple subject ids are detected,
the warning is produced and only 1st subject is used.</p>
</div>
<div class="section level5">
<h5 id="lv1_hypo-lv2_hypo-hy1_hyper-lv2_hpyer">lv1_hypo, lv2_hypo, hy1_hyper, lv2_hpyer<a class="anchor" aria-label="anchor" href="#lv1_hypo-lv2_hypo-hy1_hyper-lv2_hpyer"></a>
</h5>
<p>Users can set certain thresholds for the hypo and hyperglycemia by
passing parameters, lv1_hypo, lv2_hypo, hy1_hyper, lv2_hpyer. Level 2
indicates more severe states than level 1 so the threshold value for the
lv2_hypo value should be lower than hy1_hypo value, and the threshold
for the lv2_hyper value should higher than lv1_hyper value. Otherwise,
the warning will be produced. Here, we are passing 70 for the
hypoglycemia threshold level 2 threshold, 120 for hypoglycemia
threshold, and 180 for the hyperglycemia level 2 threshold.</p>
</div>
<div class="section level5">
<h5 id="dur_length">dur_length<a class="anchor" aria-label="anchor" href="#dur_length"></a>
</h5>
<p>By setting a duration length to 15 minutes (the last parameter), the
function will count the number of episodes that glucose values go below
or above the thresholds more than 15 minutes.</p>
</div>
</div>
<div class="section level4">
<h4 id="return-value">Return value<a class="anchor" aria-label="anchor" href="#return-value"></a>
</h4>
<p>The function returns a dataframe including number of hypo and hyper
episodes, hypo and hyper mean values, mean durations (Minutes), and
average mean values per day (%).</p>
</div>
<div class="section level4">
<h4 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h4>
<p>In this example, we calculated episodes for subject 1. The average
numbers of hypo and hyperglycemia for subject 1 (level 1) are 3.14 and
2.64 respectively. The mean duration for hypoglycemia is 243.8 minutes
and 196.9 minutes for hyperglycemia. You can also see other values such
as the mean average values for hypoglycemia and hyperglycemia, and this
function can be used for multiple subjects as well (check by setting the
parameter, data =example_data_5_subject).</p>
</div>
</div>
<div class="section level3">
<h3 id="epicalc_profile-function">Epicalc_profile function<a class="anchor" aria-label="anchor" href="#epicalc_profile-function"></a>
</h3>
<p>Visualization of the metrics produced by the
<code><a href="../reference/episode_calculation.html">episode_calculation()</a></code> function is done with the function
<code><a href="../reference/epicalc_profile.html">epicalc_profile()</a></code>. This function takes the
<code><a href="../reference/episode_calculation.html">episode_calculation()</a></code> output and displays it as a tables of
the episode metrics as well as plots that visualizes the subject’s
glucose level over time. Like <code>episode_calculation</code>, this
function is designed to work with one subject data at a time, and the
structure of the function output is shown below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epicalc_profile.html">epicalc_profile</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span></span></code></pre></div>
<p><img src="AGP_and_Episodes_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>The function will accept the following six parameters that are passed
on to <code><a href="../reference/epicalc_profile.html">epicalc_profile()</a></code>. Like
<code><a href="../reference/episode_calculation.html">episode_calculation()</a></code>, there are options to adjust the
hypoglycemia and hyperglycemia thresholds. If the hyperglycemia
threshold is lower than the hypoglycemia threshold, a warning will be
produced.</p>
<ul>
<li>“<code>lv1_hypo</code>” - First threshold for what below is
considered hypoglycemia. Default is 100 and the units are mg/dL</li>
<li>“<code>lv2_hypo</code>” - Second threshold for what below is
considered hypoglycemia. Default is 70 and the units are mg/dL</li>
<li>“<code>lv1_hyper</code>” - First threshold for what above is
considered hyperglycemia. Default is 120 and the units are mg/dL</li>
<li>“<code>lv2_hyper</code>” - Second threshold for what above is
considered hyperglycemia. Default is 160 and the units are mg/dL</li>
<li>“<code>color_scheme</code>” - String corresponding to a color scheme
for the plot.Default is dark red for <code>lv1_hypo</code>, red for
<code>lv2_hypo</code>, green for normal, yellow for
<code>lv1_hyper</code>, and orange for <code>lv2_hyper</code>.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epicalc_profile.html">epicalc_profile</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>, lv1_hypo<span class="op">=</span><span class="fl">100</span>, lv2_hypo<span class="op">=</span><span class="fl">70</span>, lv1_hyper<span class="op">=</span><span class="fl">120</span>, lv2_hyper<span class="op">=</span><span class="fl">160</span>, color_scheme<span class="op">=</span><span class="st">"Color Scheme 1"</span><span class="op">)</span></span></code></pre></div>
<p><img src="AGP_and_Episodes_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Steve Broll, David Buchanan, Elizabeth Chun, John Muschelli, Nathaniel Fernandes, Jung Hoon Seo, Johnathan Shih, Jacek Urbanek, John Schwenck, Irina Gaynanova.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
