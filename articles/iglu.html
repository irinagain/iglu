<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="iglu">
<title>Getting Started in iglu • iglu</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started in iglu">
<meta property="og:description" content="iglu">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">iglu</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/iglu.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/AGP_and_Episodes.html">AGP and Episodes</a>
    <a class="dropdown-item" href="../articles/MAGE.html">MAGE Algorithm</a>
    <a class="dropdown-item" href="../articles/lasagna_plots.html">Lasagna Plots in iglu</a>
    <a class="dropdown-item" href="../articles/metrics_list.html">List of metrics implemented in iglu</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/irinagain/iglu/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started in iglu</h1>
                        <h4 data-toc-skip class="author">Steve Broll,
Elizabeth Chun, Irina Gaynanova, David Buchanan</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/irinagain/iglu/blob/HEAD/vignettes/iglu.Rmd" class="external-link"><code>vignettes/iglu.Rmd</code></a></small>
      <div class="d-none name"><code>iglu.Rmd</code></div>
    </div>

    
    
<p>The iglu package is designed to assist in the analyses of data from
Continuous Glucose Monitors (CGMs). CGMs are small wearable devices that
measure glucose levels continuously throughout the day, with some
monitors taking measurements as often as every 5 minutes. Data from
these monitors provide a detailed quantification of the variation in
blood glucose levels during the course of the day, and thus CGMs play an
increasing role in clinical practice. For more on CGMs, see <a href="https://doi.org/10.1089/dia.2015.0417" class="external-link">Rodbard (2016) “Continuous
Glucose Monitoring: A Review of Successes, Challenges, and
Opportunities.”</a>.</p>
<p>Multiple CGM-derived metrics have been developed to assess the
quality of glycemic control and glycemic variability, many of which are
summarized in <a href="https://doi.org/10.1089/dia.2008.0132" class="external-link">Rodbard
(2009) “Interpretation of continuous glucose monitoring data: glycemic
variability and quality of glycemic control.”</a>. The iglu package
streamlines the calculation of these metrics by providing clearly named
functions that output metrics values with one line of code.</p>
<p>The iglu package is designed to work with Continuous Glucose Monitor
(CGM) data in the form of a data frame with the following three columns
present:</p>
<ul>
<li><p>Blood glucose level measurement [in mg/dL]
(<code>"gl"</code>)</p></li>
<li><p>Timestamp for glucose measurement (<code>"time"</code>)</p></li>
<li><p>Subject identification (<code>"id"</code>)</p></li>
</ul>
<p>The iglu package comes with example data from 5 subjects with Type II
diabetes whose glucose levels were measured using a Dexcom G4 CGM. These
data are part of a larger study analyzed in <a href="https://doi.org/10.1093/biostatistics/kxaa023" class="external-link">Gaynanova et
al. (2020)</a>.</p>
<div class="section level2">
<h2 id="shiny-app">Shiny App<a class="anchor" aria-label="anchor" href="#shiny-app"></a>
</h2>
<p>The iglu package comes with a shiny app containing all of the metric
calculations as well as all plot types of the package itself.</p>
<p>The full app can be accessed by running
<code><a href="../reference/iglu_shiny.html">iglu::iglu_shiny()</a></code> (iglu must be installed to use the
<code>iglu_shiny</code> function).</p>
<p>The app itself has a demo (reduced functionality) available at <a href="https://stevebroll.shinyapps.io/shinyigludemo/" class="external-link">https://stevebroll.shinyapps.io/shinyigludemo/</a>
with data pre-loaded.</p>
</div>
<div class="section level2">
<h2 id="example-datasets">Example Datasets<a class="anchor" aria-label="anchor" href="#example-datasets"></a>
</h2>
<p>The iglu package includes two datasets: example_data_1_subject, and
example_data_5_subject. The one subject data is simply the first subject
of the five subject data.</p>
<div class="section level3">
<h3 id="example-data-for-1-subject">Example data for 1 subject<a class="anchor" aria-label="anchor" href="#example-data-for-1-subject"></a>
</h3>
<p>Example data with 1 subject can be loaded with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"example_data_1_subject"</span><span class="op">)</span></span></code></pre></div>
<p>This dataset contains 2915 observations of 3 columns corresponding to
the three components listed in the introduction:</p>
<ul>
<li>
<code>"id"</code> - Factor (character string) column for subject
identification</li>
<li>
<code>"time"</code> - POSIXct column for datetime values</li>
<li>
<code>"gl"</code> - Numeric column for glucose measurement</li>
</ul>
<p>Data used with iglu functions may have additional columns, but the
columns for id, time and glucose values must be named as above.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2915    3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    2915 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;  $ id  : Factor w/ 1 level "Subject 1": 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ time: POSIXct, format: "2015-06-06 16:50:27" "2015-06-06 17:05:27" ...</span></span>
<span><span class="co">#&gt;  $ gl  : int  153 137 128 121 120 138 155 159 154 152 ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt;          id                time  gl</span></span>
<span><span class="co">#&gt; 1 Subject 1 2015-06-06 16:50:27 153</span></span>
<span><span class="co">#&gt; 2 Subject 1 2015-06-06 17:05:27 137</span></span>
<span><span class="co">#&gt; 3 Subject 1 2015-06-06 17:10:27 128</span></span>
<span><span class="co">#&gt; 4 Subject 1 2015-06-06 17:15:28 121</span></span>
<span><span class="co">#&gt; 5 Subject 1 2015-06-06 17:25:27 120</span></span>
<span><span class="co">#&gt; 6 Subject 1 2015-06-06 17:45:27 138</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-data-for-5-subjects">Example data for 5 subjects<a class="anchor" aria-label="anchor" href="#example-data-for-5-subjects"></a>
</h3>
<p>Example data with multiple subjects can be loaded with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"example_data_5_subject"</span><span class="op">)</span></span></code></pre></div>
<p>This dataset contains the same 3 columns as the dataset in the single
subject case, but now with 13866 observations from 5 subjects. The first
subject in this multiple subject dataset is the same as the single
subject from the previous examples.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">example_data_5_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 13866     3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">example_data_5_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    13866 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;  $ id  : Factor w/ 5 levels "Subject 1","Subject 2",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ time: POSIXct, format: "2015-06-06 16:50:27" "2015-06-06 17:05:27" ...</span></span>
<span><span class="co">#&gt;  $ gl  : int  153 137 128 121 120 138 155 159 154 152 ...</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="importing-and-cleaning-data">Importing and Cleaning data<a class="anchor" aria-label="anchor" href="#importing-and-cleaning-data"></a>
</h2>
<p>Iglu comes with its own set of functions for the importing of raw
data from several common CGM formats, as well as for the general
reformatting of any data to work with the package.</p>
<div class="section level3">
<h3 id="importing-data">Importing data<a class="anchor" aria-label="anchor" href="#importing-data"></a>
</h3>
<p>To import raw data from a Dexcom, FreeStyle Libre, Libre Pro, ASC, or
iPro monitor, the read_raw_data function can be used. The first
parameter should the name of the .csv file you are attempting to read.
Note that the function currently only accepts files read.csv can parse.
The next parameter is sensor = [sensor name]. Currently the supported
values for sensor are “dexcom”, “libre”, “librepro”, “asc” and “ipro”.
These correspond to the sensor whose format you are attempting to read
from. The next parameter is id. This is the value that will be used as
the subject’s id. This parameter has special values, setting it to
“filename” will cause the function to use the filename as the id.
Similarly, if this value is set to “read”, the function will attempt to
read the subject id from the data. A value of “read” is not supported
for the “asc” sensor. If no id parameter is passed, the filename will be
used. Also, when reading from FreeStyle Libre format, if the phrase
“mmol/l” is found in the column names, the glucose values will be
multiplied by 18. The read_raw_data function will return a dataframe
with three columns, “id”, “time”, and “gl”, corresponding to subject id,
time, and glucose readings respectively. Sensor formats change with
ongoing development, so these functions may become depreciated. If any
issues are encountered, contact the package maintainer. This is
currently Irina Gaynanova, who can be reached at <a href="mailto:irinag@stat.tamu.edu" class="email">irinag@stat.tamu.edu</a></p>
<p>Ex.:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_raw_data.html">read_raw_data</a></span><span class="op">(</span><span class="st">"mydexcomdata.csv"</span>, sensor <span class="op">=</span> <span class="st">"dexcom"</span>, id <span class="op">=</span> <span class="st">"read"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="processing-data">Processing data<a class="anchor" aria-label="anchor" href="#processing-data"></a>
</h3>
<p>The process_data function is designed to take a dataframe or tibble
with an arbitrary number of columns with arbitrary column names and
return a dataframe with only the columns “id” “time” and “gl”, which is
the format used by iglu. It currently takes five parameters, the data to
be processed, id, a string indicating the column name of the subject
ids, timestamp, a string matching the column name where the timestamps
can be found, glu, a string matching the column name where the glucose
readings can be found, and time_parser, a function which is used to
parse the time strings into time objects, this currently defaults to
as.POSIXct. Currently data, timestamp, and glu are required parameters.
If no id parameter is passed an id of 1 will be assigned to all values
in the data. If “mmol/l” is found in the column name for glucose
readings, the readings will be multipled by 18 in the returned
dataframe.</p>
<p>Ex.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/process_data.html">process_data</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, id <span class="op">=</span> <span class="st">"id"</span>, timestamp <span class="op">=</span> <span class="st">"time"</span>, glu <span class="op">=</span> <span class="st">"gl"</span><span class="op">)</span></span></code></pre></div>
<p>If your times are in a format not parsable by as.POSIXct, you can
parse a custom format by passing function(time_string)
{strptime(time_string, format = [format string])} as the time_parser
parameter.</p>
<p>For example, the following call parses datetimes in mm/dd/yyyy hh:mm
format.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/process_data.html">process_data</a></span><span class="op">(</span><span class="va">data</span>, id <span class="op">=</span> <span class="st">"id"</span>, timestamp <span class="op">=</span> <span class="st">"time"</span>, glu <span class="op">=</span> <span class="st">"gl"</span>, time_parser <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">time_string</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></span><span class="op">(</span><span class="va">time_string</span>, format <span class="op">=</span> <span class="st">"%d/%m/%Y %H:%M"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="calculating-time-independent-metrics">Calculating time-independent metrics<a class="anchor" aria-label="anchor" href="#calculating-time-independent-metrics"></a>
</h2>
<p>All the metrics implemented in the package can be divided into two
categories: time-independent and time-dependent.</p>
<p>Time-independent metrics do not use any linear interpolation because
the time component of the data is not used in their calculations.
Because the time component is not necessary, when working with a single
subject only a glucose vector is required. If a glucose vector for
multiple subjects is supplied, or if a data frame that doesn’t have all
three columns is supplied, these functions will treat all glucose values
as though they are from the same subject.</p>
<div class="section level3">
<h3 id="example-metrics-time-independent">Example metrics: time-independent<a class="anchor" aria-label="anchor" href="#example-metrics-time-independent"></a>
</h3>
<p>All metric functions in iglu will produce the output in a tibble
form. See documentation on tibbles with vignette(‘tibble’) or
?<code>tbl_df-class</code>.</p>
<p>Some metric functions, like <code><a href="../reference/above_percent.html">above_percent()</a></code>, will return
multiple values for a single subject.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/above_percent.html">above_percent</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   id        above_140 above_180 above_250</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1      26.1      8.20     0.377</span></span></code></pre></div>
<p>When a data frame is passed, subject id will always be printed in the
id column, and metrics will be printed in the following columns.</p>
<p>As discussed above, just the glucose vector can be supplied for the
single subject case.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/above_percent.html">above_percent</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">$</span><span class="va">gl</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   above_140 above_180 above_250</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>      26.1      8.20     0.377</span></span></code></pre></div>
<p>However, it is not recommended to pass just glucose values whenever
the time and subject are also available, because this output will not
contain the subject ID.</p>
<p>The list of target values for the above_percent metric is a parameter
that can be changed:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/above_percent.html">above_percent</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>, targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">300</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   id        above_100 above_200 above_300</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1      72.7      3.40         0</span></span></code></pre></div>
<p>Many metrics have parameters that can be changed. To see available
parameters for a given metric, see the documentation i.e. ?above_percent
or help(above_percent).</p>
<p>Not all metric functions return multiple values. Many, like the
Hyperglycemia index metric (function call: <code><a href="../reference/hyper_index.html">hyper_index()</a></code>)
will return just a single value for each subject, producing a column for
value and a column for subject id (if a dataframe is passed), with one
row for each subject.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hyper_index.html">hyper_index</a></span><span class="op">(</span><span class="va">example_data_5_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   id        hyper_index</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1       0.391</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject 2       4.17 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Subject 3       1.18 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Subject 4       0.358</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Subject 5       2.21</span></span></code></pre></div>
<p>In this example, Subject 2 has the largest Hyperglycemia index,
indicating the worst hyperglycemia. This is reflected in percent of
times Subject 2 spends above fixed glucose target (see results of
<code>above_percent</code>).</p>
</div>
</div>
<div class="section level2">
<h2 id="calculating-time-dependent-metrics">Calculating time-dependent metrics<a class="anchor" aria-label="anchor" href="#calculating-time-dependent-metrics"></a>
</h2>
<p>Unlike time-independent metrics, time-dependent metrics require the
input to be a dataframe with subject id’s, time, and glucose values.
Time-dependent metric functions cannot be passed a vector of glucose
values. With timestamped data, a potential challenge arises when
timestamps are not on perfect intervals due to missing measurements. To
address this challenge, we developed the <code>CGMS2DayByDay</code>
function.</p>
<div class="section level3">
<h3 id="cgms2daybyday">CGMS2DayByDay()<a class="anchor" aria-label="anchor" href="#cgms2daybyday"></a>
</h3>
<p>Observe that the timestamps in the first rows are not even. The
<code>CGMS2DayByDay</code> function addresses this issue by linearly
interpolating glucose measures for each subject on an equally spaced
time grid from day to day. To prevent extrapolation, missing values are
inserted between any two measurements that are more than
<code>intergap</code> minutes apart (default value is 45 minutes, can be
changed by the user). This function is automatically called by all
metrics that require such interpolation, however it is also available to
the user directly. The function is designed to work with one subject
data at a time, the structure of function output is shown below.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/CGMS2DayByDay.html">CGMS2DayByDay</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ gd2d        : num [1:14, 1:288] NA 112.2 92 90.1 143.1 ...</span></span>
<span><span class="co">#&gt;  $ actual_dates: Date[1:14], format: "2015-06-06" "2015-06-07" ...</span></span>
<span><span class="co">#&gt;  $ dt0         : num 5</span></span></code></pre></div>
<p>The first part of the output, <code>gd2d</code>, is the interpolated
grid of values. Each row corresponds to one day of measurements, and the
columns correspond to an equi-distant time grid covering a 24 hour time
span. The grid is chosen to match the frequency of the sensor (5 minutes
in this example leading to <span class="math inline">\((24 * 60)/ 5 =
288\)</span> columns), which is returned as <code>dt0</code>. The
returned <code>actual_dates</code> allows one to map the rows in
<code>gd2d</code> back to the original dates. The achieved alignment of
glucose measurement times across the days enables both the calculation
of corresponding metrics, and the creation time-dependent visuals such
as lasagna plots. The default frequency can be adjusted as follows.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/CGMS2DayByDay.html">CGMS2DayByDay</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>, dt0 <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ gd2d        : num [1:14, 1:144] NA 111.1 92.9 89.1 138.2 ...</span></span>
<span><span class="co">#&gt;  $ actual_dates: Date[1:14], format: "2015-06-06" "2015-06-07" ...</span></span>
<span><span class="co">#&gt;  $ dt0         : num 10</span></span></code></pre></div>
<p>Note that the final part of the output reflects our input, and there
are now only 144 columns instead of 288.</p>
<p>The CGMS2DayByDay function also allows specification of the maximum
allowable gap to interpolate values across (default is 45 minutes) and a
string corresponding to time zone (default is the timezone of the user’s
system).</p>
<p>Functions for metrics requiring linear interpolation will accept the
following three parameters that are passed on to
<code><a href="../reference/CGMS2DayByDay.html">CGMS2DayByDay()</a></code>:</p>
<ul>
<li>“<code>dt0</code>” - Time frequency (numeric) for interpolation.
Default will automatically match the frequency of the data</li>
<li>“<code>inter_gap</code>” - Maximum allowable gap in minutes
(numeric) for interpolation</li>
<li>“<code>tz</code>” - String corresponding to timezone where the
data’s measurements were recorded</li>
</ul>
<p>In the example_data_5_subject dataset, it is important to specify
<code>tz</code> = ‘EST’, because a Daylight Savings Time shift can cause
miscalculations if the wrong timezone is used. A proper call for this
dataset, being recorded in EST, would be:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/CGMS2DayByDay.html">CGMS2DayByDay</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>, tz <span class="op">=</span> <span class="st">'EST'</span><span class="op">)</span></span></code></pre></div>
<p>Examples of proper metric function calls will be shown in the next
section.</p>
</div>
<div class="section level3">
<h3 id="example-metrics-time-dependent">Example metrics: time-dependent<a class="anchor" aria-label="anchor" href="#example-metrics-time-dependent"></a>
</h3>
<p>Some metric functions, like <code><a href="../reference/conga.html">conga()</a></code> (Continuous
Overlapping Net Glycemic Action), will return just a single value for
each subject, resulting in a 2 column tibble (1 column for id and 1 for
the single value).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/conga.html">conga</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>, tz <span class="op">=</span> <span class="st">'EST'</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   id        CONGA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1  37.0</span></span></code></pre></div>
<p>Other metrics can return multiple values for a single subject. For
example, <code><a href="../reference/sd_measures.html">sd_measures()</a></code>, which requires linear
interpolation, computes 6 unique standard deviation subtypes per
subject.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sd_measures.html">sd_measures</a></span><span class="op">(</span><span class="va">example_data_5_subject</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 7</span></span></span>
<span><span class="co">#&gt;   id          SDw SDhhmm SDwsh  SDdm   SDb SDbdm</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1  26.4   19.6  6.54  16.7  27.9  24.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject 2  36.7   22.8  7.62  52.0  48.0  35.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Subject 3  42.9   14.4  9.51  12.4  42.8  42.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Subject 4  24.5   12.9  6.72  16.9  25.5  22.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Subject 5  50.0   29.6 12.8   23.3  50.3  45.9</span></span></code></pre></div>
<p>Notice the high fluctuations in Subject 5, with all but one subtypes
of standard deviation being the largest for Subject 5. This provides
additional level of CGM data interpretation, since frequent or large
glucose fluctuations may contribute to diabetes-related complications
independently from chronic hyperglycemia.</p>
</div>
</div>
<div class="section level2">
<h2 id="calculating-metrics-for-sleep-or-wake-periods">Calculating metrics for sleep or wake periods<a class="anchor" aria-label="anchor" href="#calculating-metrics-for-sleep-or-wake-periods"></a>
</h2>
<p>Iglu provides a function for calculating metrics over a given
time-range. The calculate_sleep_wake function allows the user to apply
an arbitrary function to given data after it has been filtered by time
of day. It supports calculating on inside the time range, outside the
time range, or both separately.</p>
<div class="section level3">
<h3 id="using-calculate_sleep_wake">Using calculate_sleep_wake<a class="anchor" aria-label="anchor" href="#using-calculate_sleep_wake"></a>
</h3>
<p>To use this function, pass it the data you want and the function or
name of the function you want to apply. For example, to calculate the
standard deviation of glucose readings from 12-6am, the function’s
default time period, the following call will work.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calculate_sleep_wake.html">calculate_sleep_wake</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>, <span class="va">sd_glu</span>, calculate <span class="op">=</span> <span class="st">"sleep"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   id           SD</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1  25.4</span></span></code></pre></div>
<p>A custom time period can be defined with the sleep_start and
sleep_end parameters. The values of these parameters should be real
numbers between 0-24. If an integer is passed to sleep_start, the whole
hour will be included. If an integer is passed to sleep_end, everything
up to but not including that hour will be included. The following call
will calculate the metrics for readings between 2:00-7:59am.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calculate_sleep_wake.html">calculate_sleep_wake</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, <span class="va">sd_measures</span>, sleep_start <span class="op">=</span> <span class="fl">2</span>, sleep_end <span class="op">=</span> <span class="fl">8</span>, calculate <span class="op">=</span> <span class="st">"sleep"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 7</span></span></span>
<span><span class="co">#&gt;   id          SDw SDhhmm SDwsh  SDdm   SDb SDbdm</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1  10.2   3.04  3.15  21.3  23.9  12.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject 2  18.9  12.8   6.22  41.9  43.6  18.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Subject 3  17.6   9.99  4.86  20.1  32.7  26.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Subject 4  10.8   3.98  3.43  12.2  17.3  12.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Subject 5  28.1  13.3   5.88  29.4  38.4  27.2</span></span></code></pre></div>
<p>There is an option to calculate for either sleep, wake, or both
periods. By default, the metric will be calculated for the sleep period.
To calculate for the wake period, set the “calculate” parameter to
“wake”. The following call will calculate the metric for all readings
outside of 11pm-6:59am</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calculate_sleep_wake.html">calculate_sleep_wake</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, <span class="va">grade</span>, sleep_start <span class="op">=</span> <span class="fl">23</span>, sleep_end <span class="op">=</span> <span class="fl">7</span>, calculate <span class="op">=</span> <span class="st">"wake"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   id        GRADE</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1  4.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject 2 15.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Subject 3  7.28</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Subject 4  3.51</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Subject 5 11.7</span></span></code></pre></div>
<p>To calculate for sleep and wake periods separately and return both of
those values, labeled accordingly, set the ‘calculate’ parameter to
‘both’.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calculate_sleep_wake.html">calculate_sleep_wake</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, <span class="va">gmi</span>, calculate <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   id        `GMI sleep` `GMI wake`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1        5.97       6.41</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject 2        8.58       8.52</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Subject 3        7.05       6.98</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Subject 4        6.70       6.31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Subject 5        6.94       7.69</span></span></code></pre></div>
<p>Custom parameters can still be passed to the applied function. Any
parameters with different names from calculate_sleep_wake’s parameters
will be passed on to the function. The following call applies COGI with
the custom defined targets and weights.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calculate_sleep_wake.html">calculate_sleep_wake</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, <span class="va">cogi</span>, calculate <span class="op">=</span> <span class="st">"sleep"</span>, targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">150</span><span class="op">)</span>, weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.3</span>,<span class="fl">.2</span>,<span class="fl">.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   id         COGI</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1  91.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject 2  52.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Subject 3  77.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Subject 4  89.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Subject 5  63.9</span></span></code></pre></div>
<p>All of these options can be combined</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calculate_sleep_wake.html">calculate_sleep_wake</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, <span class="va">grade_eugly</span>, sleep_start <span class="op">=</span> <span class="fl">1</span>, sleep_end <span class="op">=</span> <span class="fl">9</span>, calculate <span class="op">=</span> <span class="st">"both"</span>, lower <span class="op">=</span> <span class="fl">80</span>, upper <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   id        `GRADE_eugly sleep` `GRADE_eugly wake`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Subject 1               59.0               31.0 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject 2                1.32               1.38</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Subject 3               41.0               21.6 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Subject 4               55.7               37.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Subject 5               25.3                6.99</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualizations">Visualizations<a class="anchor" aria-label="anchor" href="#visualizations"></a>
</h2>
<p>The iglu package supports multiple plot types summarized below:</p>
<table class="table">
<colgroup>
<col width="23%">
<col width="56%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">Function call</th>
<th align="left">Visualization description</th>
<th align="left">Main parameters</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>plot_glu</code></td>
<td align="left">Multiple plot types: time series and lasagna</td>
<td align="left">
<code>plottype</code>, <code>lasagnatype</code>
</td>
</tr>
<tr class="even">
<td align="left"><code>plot_roc</code></td>
<td align="left">Time series of glucose values colored by rate of change
(ROC)</td>
<td align="left">
<code>subjects</code>, <code>timelag</code>
</td>
</tr>
<tr class="odd">
<td align="left"><code>hist_roc</code></td>
<td align="left">Histogram of rate of change (ROC) values</td>
<td align="left">
<code>subjects</code>, <code>timelag</code>
</td>
</tr>
<tr class="even">
<td align="left"><code>plot_lasagna</code></td>
<td align="left">Lasagna plot of glucose values for multiple
subjects</td>
<td align="left">
<code>datatype</code>, <code>lasagnatype</code>
</td>
</tr>
<tr class="odd">
<td align="left"><code>plot_lasagna_1subject</code></td>
<td align="left">Lasagna plot of glucose values for a single
subject</td>
<td align="left"><code>lasagnatype</code></td>
</tr>
<tr class="even">
<td align="left"><code>agp</code></td>
<td align="left">Ambulatory Glucose Profile (AGP)</td>
<td align="left">
<code>maxd</code>, <code>daily</code>
</td>
</tr>
<tr class="odd">
<td align="left"><code>epicalc_profile</code></td>
<td align="left">Profile of glycemic episodes</td>
<td align="left">
<code>hypo_thresh</code>,
<code>hyper_thresh</code>
</td>
</tr>
<tr class="even">
<td align="left"><code>mage</code></td>
<td align="left">MAGE plot displaying peaks and nadirs</td>
<td align="left">
<code>plot</code>, <code>title</code>
</td>
</tr>
</tbody>
</table>
<p>Time-series and rate of change plots are shown in examples below. For
details on the other plotting types, see the specific vignette
corresponding to the visualization.</p>
<div class="section level3">
<h3 id="example-plots-time-series">Example plots: time-series<a class="anchor" aria-label="anchor" href="#example-plots-time-series"></a>
</h3>
<p>The simplest visual is the time series plot generated using the
function <code>plot_glu</code>. This plot type can support both single
and multiple subjects.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_glu.html">plot_glu</a></span><span class="op">(</span><span class="va">example_data_1_subject</span>, plottype <span class="op">=</span> <span class="st">'tsplot'</span>, tz <span class="op">=</span> <span class="st">"EST"</span><span class="op">)</span></span></code></pre></div>
<p><img src="iglu_files/figure-html/unnamed-chunk-23-1.png" width="672"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_glu.html">plot_glu</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, plottype <span class="op">=</span> <span class="st">'tsplot'</span>, tz <span class="op">=</span> <span class="st">"EST"</span><span class="op">)</span></span></code></pre></div>
<p><img src="iglu_files/figure-html/unnamed-chunk-23-2.png" width="672"></p>
<p>We set the ‘tz’ (timezone) parameter to be EST because the data was
collected in the eastern time zone. If left blank, the time zone used
for plotting will be the system’s time zone. Time zone is mainly an
issue in cases where daylight savings time might make it appear as
though there were duplicate values at some time points.</p>
<p>To just plot a single subject of interest from the grid of time
series plots, set the ‘subjects’ parameter to be that subject’s ID.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_glu.html">plot_glu</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, plottype <span class="op">=</span> <span class="st">'tsplot'</span>, subjects <span class="op">=</span> <span class="st">'Subject 3'</span>, tz <span class="op">=</span> <span class="st">"EST"</span><span class="op">)</span></span></code></pre></div>
<p><img src="iglu_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
<p>The red lines can be shifted to any Lower and Upper Target Range
Limits with the ‘LLTR’ and ‘ULTR’ arguments.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_glu.html">plot_glu</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, plottype <span class="op">=</span> <span class="st">'tsplot'</span>, subjects <span class="op">=</span> <span class="st">'Subject 3'</span>, LLTR <span class="op">=</span> <span class="fl">80</span>, ULTR <span class="op">=</span> <span class="fl">150</span>, tz <span class="op">=</span> <span class="st">"EST"</span><span class="op">)</span></span></code></pre></div>
<p><img src="iglu_files/figure-html/unnamed-chunk-25-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="lasagna-plots">Lasagna plots<a class="anchor" aria-label="anchor" href="#lasagna-plots"></a>
</h3>
<p>The <code>plot_glu</code> function also supports lasagna plots by
changing the ‘plottype’ parameter. For more on lasagna plots, see <a href="https://doi.org/10.1097/ede.0b013e3181e5b06a" class="external-link">Swihart et
al. (2010) “Lasagna Plots: A Saucy Alternative to Spaghetti Plots.”</a>.
The lasagna plots in iglu can be single-subject or multi-subject. For
more information see the lasagna_plots vignette.</p>
</div>
<div class="section level3">
<h3 id="example-plots-rate-of-change">Example plots: Rate of change<a class="anchor" aria-label="anchor" href="#example-plots-rate-of-change"></a>
</h3>
<p>In addition , <code>iglu</code> also allows one to visualize local
changes in glucose variability as measured by rate of change <a href="https://doi.org/10.1089/dia.2008.0138" class="external-link">Clarke et al. (2009)</a>.
There are two types of visualizations associated with rate of change, a
time-series plot and a histogram. For both plots, the colors indicate
rate of change: white indicates a stable rate of change while red and
blue represent times at which the glucose is significantly rising or
falling, respectively. Thus colored points represent times of glucose
variability, while white points represent glucose stability. The below
figure shows a side by side comparison of rate of change time-series
plots for two subjects. Subject 1 shows significantly less glucose
variability than Subject 5.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_roc.html">plot_roc</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, subjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Subject 1"</span>, <span class="st">"Subject 5"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="iglu_files/figure-html/unnamed-chunk-26-1.png" width="672"></p>
<p>The next figure shows a side by side comparison of rate of change
histogram plots for the same subjects. Once again, the colors show in
what direction and how quickly the glucose is changing. The histogram
plots allow one to immediately assess the variation in rate of change.
Extreme values on either end of the histogram indicate very rapid rises
or drops in glucose - a high degree of local variability. Here, Subject
1 once again shows lower glucose variability by having a narrower
histogram with most values falling between -2 mg/dl/min and 2 mg/dl/min.
Subject 5 has a shorter, more widely distributed histogram indicating
greater glucose variability.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hist_roc.html">hist_roc</a></span><span class="op">(</span><span class="va">example_data_5_subject</span>, subjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Subject 1"</span>, <span class="st">"Subject 5"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="iglu_files/figure-html/unnamed-chunk-27-1.png" width="672"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Elizabeth Chun, Steve Broll, David Buchanan, John Muschelli, Nathaniel Fernandes, Irina Gaynanova.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
